un_score$apa_un[un_score$apa_un==0]=NA
un_score$date_un=as.Date(un_score$date_un)
un_score <- un_score %>% group_by(date_un) %>%
summarize(avg=mean(apa_un,na.rm=T)) %>%
rename(date=date_un)
f2=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(un_score$date)) {
if(as.Date(newdf$Var1[i])==as.Date(un_score$date[j])){
f2[i]=un_score$avg[j]
}
}
}
f2
newdf$apache_un=f2
date_plan=df13$date_of_admission[df13$admission_type=="planned" | df13$Admission.diagnosis_type=="Non operative"]
date_plan=as.Date(date_plan)
apa_plan=df13$AdmissionAssessment.apache_score[df13$admission_type=="planned" | df13$Admission.diagnosis_type=="Non operative"]
apa_plan[is.na(apa_plan)]=0
plan_score=data.frame(date_plan,apa_plan)
plan_score=na.omit(plan_score)
plan_score$apa_plan[plan_score$apa_plan==0]=NA
plan_score$date_plan=as.Date(plan_score$date_plan)
plan_score <- plan_score %>% group_by(date_plan) %>%
summarize(avg=mean(apa_plan,na.rm=T)) %>%
rename(date=date_plan)
f3=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(plan_score$date)) {
if(as.Date(newdf$Var1[i])==as.Date(plan_score$date[j])){
f3[i]=plan_score$avg[j]
}
}
}
f3
newdf$apache_plan=f3
date_plan=df13$date_of_admission[df13$admission_type=="planned"]
date_plan=as.Date(date_plan)
apa_plan=df13$AdmissionAssessment.apache_score[df13$admission_type=="planned"]
plan_score=data.frame(date_plan,apa_plan)
plan_score=na.omit(plan_score)
plan_score$apa_plan[plan_score$apa_plan==0]=NA
plan_score$date_plan=as.Date(plan_score$date_plan)
plan_score <- plan_score %>% group_by(date_plan) %>%
summarize(avg=mean(apa_plan,na.rm=T)) %>%
rename(date=date_plan)
f3=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(plan_score$date)) {
if(as.Date(newdf$Var1[i])==as.Date(plan_score$date[j])){
f3[i]=plan_score$avg[j]
}
}
}
f3
apa_plan
newdf$apache_plan
date_plan=df13$date_of_admission[df13$admission_type=="planned"]
date_plan=as.Date(date_plan)
apa_plan=df13$AdmissionAssessment.apache_score[df13$admission_type=="planned"]
apa_plan[is.na(apa_plan)]=0
plan_score=data.frame(date_plan,apa_plan)
plan_score=na.omit(plan_score)
plan_score$apa_plan[plan_score$apa_plan==0]=NA
plan_score$date_plan=as.Date(plan_score$date_plan)
plan_score <- plan_score %>% group_by(date_plan) %>%
summarize(avg=mean(apa_plan,na.rm=T)) %>%
rename(date=date_plan)
f3=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(plan_score$date)) {
if(as.Date(newdf$Var1[i])==as.Date(plan_score$date[j])){
f3[i]=plan_score$avg[j]
}
}
}
f3
date_plan=df13$date_of_admission[df13$admission_type=="planned" | df13$Admission.diagnosis_type=="Non operative"]
date_plan=as.Date(date_plan)
apa_plan=df13$AdmissionAssessment.apache_score[df13$admission_type=="planned" | df13$Admission.diagnosis_type=="Non operative"]
apa_plan[is.na(apa_plan)]=0
plan_score=data.frame(date_plan,apa_plan)
plan_score=na.omit(plan_score)
plan_score$apa_plan[plan_score$apa_plan==0]=NA
plan_score$date_plan=as.Date(plan_score$date_plan)
plan_score <- plan_score %>% group_by(date_plan) %>%
summarize(avg=mean(apa_plan,na.rm=T)) %>%
rename(date=date_plan)
f3=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(plan_score$date)) {
if(as.Date(newdf$Var1[i])==as.Date(plan_score$date[j])){
f3[i]=plan_score$avg[j]
}
}
}
f3
newdf$apache_plan=f3
df2$Admission.source_of_admission
df2$`Admission.Other diagnosis`
df2$Admission.snomed_diagnosis_concept_id
df2$Admission.snomed_diagnosis_term
df13$mechanically_ventilated
mech_date=data.frame(table(df13$date_of_admission[df13$mechanically_ventilated=="mechanical_vent"]))
mech_date$Var1=as.Date(mech_date$Var1)
f4=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(mech_date$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(mech_date$Var1[j])){
f4[i]=mech_date$Freq[j]
}
}
}
f4
newdf$mech_freq=f4
runApp()
runApp()
runApp()
runApp()
runApp()
# Admission type
plan=table(df13$date_of_admission[df2$admission_type=="Planned" | df13$Admission.diagnosis_type=="Non operative"])
unplan=table(df13$date_of_admission[df2$admission_type=="Unplanned" | df13$Admission.diagnosis_type=="Post operative"])
plan=table(df13$date_of_admission[df13$admission_type=="Planned" | df13$Admission.diagnosis_type=="Non operative"])
unplan=table(df13$date_of_admission[df13$admission_type=="Unplanned" | df13$Admission.diagnosis_type=="Post operative"])
df11=data.frame(plan) #planned
df11$Var1<- as.Date(df11$Var1)
df12=data.frame(unplan) #unplanned
df12$Var1<- as.Date(df12$Var1)
f5=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(df11$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(df11$Var1[j])){
f5[i]=df11$Freq[j]
}
}
}
newdf$planned=f5
f6=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(df12$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(df12$Var1[j])){
f6[i]=df12$Freq[j]
}
}
}
newdf$unplanned=f6
newdf$unplanned
runApp()
View(newdf)
View(a)
sum(is.na(plan))
sum(is.na(unplan))
plan=table(df13$date_of_admission[df13$Admission.diagnosis_type=="Non operative"])
unplan=table(df13$date_of_admission[df13$Admission.diagnosis_type=="Post operative"])
df11=data.frame(plan) #planned
df11$Var1<- as.Date(df11$Var1)
df12=data.frame(unplan) #unplanned
df12$Var1<- as.Date(df12$Var1)
sum(is.na(plan))
sum(is.na(unplan))
f5=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(df11$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(df11$Var1[j])){
f5[i]=df11$Freq[j]
}
}
}
newdf$planned=f5
#  This is for unplanned
f6=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(df12$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(df12$Var1[j])){
f6[i]=df12$Freq[j]
}
}
}
newdf$unplanned=f6
runApp()
df13$admission_type
df13$admission_type[df13$date_of_admission>"2017-11-01" & df13$date_of_admission<"2017-11-31" ]
df13$admission_type[as.Date(df13$date_of_admission)>"2017-11-01" & as.Date(df13$date_of_admission)<"2017-11-31" ]
df13$admission_type[as.Date(df13$date_of_admission)>"2017-11-01" & as.Date(df13$date_of_admission)<"2017-11-31"]
df13$admission_type[as.Date(df13$date_of_admission)>"2017-11-01" & as.Date(df13$date_of_admission)<"2017-11-31",]
df13$admission_type[as.Date(df13$date_of_admission)>"2017-11-01" & as.Date(df13$date_of_admission)<"2017-11-31"]
df13$Admission.diagnosis_type[as.Date(df13$date_of_admission)>"2017-11-01" & as.Date(df13$date_of_admission)<"2017-11-31"]
df13$Admission.diagnosis_type[as.Date(df13$date_of_admission)>"2017-11-01" & as.Date(df13$date_of_admission)<"2020-11-31"]
as.factor(df13$Admission.diagnosis_type)[as.Date(df13$date_of_admission)>"2017-11-01" & as.Date(df13$date_of_admission)<"2020-11-31"]
df13$admission_type
df13$Admission.diagnosis_type
View(df13)
View(df13)
View(newdf)
View(df13)
View(newdf)
df13$date_of_admission["2017-11-17"]
View(newdf)
View(newdf)
df13$date_of_admission["2018-01-28"]
as.Date(df13$date_of_admission)["2018-01-28"]
dates
View(newdf)
df13$Admission.diagnosis_type2
df13$Admission.diagnosis_type
df13$Admission.diagnosis_type[df13$date_of_admission=="2017-11-07"]
df13$Admission.diagnosis_type[as.Date(df13$date_of_admission)=="2017-11-07"]
df13$admission_type[as.Date(df13$date_of_admission)=="2017-11-07"]
View(newdf)
View(newdf)
df13$admission_type
df13$admission_type[as.Date(df13$date_of_admission)=="2018-11-31"]
df13$admission_type[as.Date(df13$date_of_admission)=="2018-01-01"]
View(newdf)
df13$admission_type[as.Date(df13$date_of_admission)=="2019-11-25"]
df13$admission_type[as.Date(df13$date_of_admission)>"2017-11-01" & as.Date(df13$date_of_admission)<"2017-11-10"]
View(df13)
df13=df2[df2$unitId=="5d7a22aa717864001b82ba32",]
View(df13)
sum(is.na(df13$date_of_admission))
mech_date=data.frame(table(df13$date_of_admission[df13$mechanically_ventilated=="mechanical_vent"]))
mech_date$Var1=as.Date(mech_date$Var1)
f4=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(mech_date$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(mech_date$Var1[j])){
f4[i]=mech_date$Freq[j]
}
}
}
f4
newdf$mech_freq=f4
df13$Admission.diagnosis_type[df13$date_of_admission=="2017-11-07"]
df13$admission_type[df13$date_of_admission=="2017-11-07"]
View(newdf)
df13$admission_type[df13$date_of_admission=="2017-11-13"]
df13$Admission.diagnosis_type[df13$date_of_admission=="2017-11-13"]
df13$AdmissionAssessment.apache_score=as.integer(df13$AdmissionAssessment.apache_score)
date_un=df13$date_of_admission[df13$Admission.diagnosis_type=="Non operative"]
date_un=as.Date(date_un)
apa_un=df13$AdmissionAssessment.apache_score[df13$Admission.diagnosis_type=="Non operative"]
apa_un[is.na(apa_un)]=0
un_score=data.frame(date_un,apa_un)
un_score=na.omit(un_score)
un_score$apa_un[un_score$apa_un==0]=NA
un_score$date_un=as.Date(un_score$date_un)
un_score <- un_score %>% group_by(date_un) %>%
summarize(avg=mean(apa_un,na.rm=T)) %>%
rename(date=date_un)
f2=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(un_score$date)) {
if(as.Date(newdf$Var1[i])==as.Date(un_score$date[j])){
f2[i]=un_score$avg[j]
}
}
}
f2
newdf$apache_un=f2
date_plan=df13$date_of_admission[df13$Admission.diagnosis_type=="Post operative"]
date_plan=as.Date(date_plan)
apa_plan=df13$AdmissionAssessment.apache_score[df13$Admission.diagnosis_type=="Post operative"]
apa_plan[is.na(apa_plan)]=0
plan_score=data.frame(date_plan,apa_plan)
plan_score=na.omit(plan_score)
plan_score$apa_plan[plan_score$apa_plan==0]=NA
plan_score$date_plan=as.Date(plan_score$date_plan)
plan_score <- plan_score %>% group_by(date_plan) %>%
summarize(avg=mean(apa_plan,na.rm=T)) %>%
rename(date=date_plan)
f3=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(plan_score$date)) {
if(as.Date(newdf$Var1[i])==as.Date(plan_score$date[j])){
f3[i]=plan_score$avg[j]
}
}
}
f3
newdf$apache_plan=f3
mech_date=data.frame(table(df13$date_of_admission[df13$mechanically_ventilated=="mechanical_vent"]))
mech_date$Var1=as.Date(mech_date$Var1)
f4=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(mech_date$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(mech_date$Var1[j])){
f4[i]=mech_date$Freq[j]
}
}
}
f4
newdf$mech_freq=f4
plan=table(df13$date_of_admission[df13$Admission.diagnosis_type=="Post operative"])
unplan=table(df13$date_of_admission[df13$Admission.diagnosis_type=="Non operative"])
sum(is.na(plan))
sum(is.na(unplan))
df11=data.frame(plan) #planned
df11$Var1<- as.Date(df11$Var1)
df12=data.frame(unplan) #unplanned
df12$Var1<- as.Date(df12$Var1)
#  This is for planned
f5=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(df11$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(df11$Var1[j])){
f5[i]=df11$Freq[j]
}
}
}
newdf$planned=f5
#  This is for unplanned
f6=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(df12$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(df12$Var1[j])){
f6[i]=df12$Freq[j]
}
}
}
newdf$unplanned=f6
runApp()
View(newdf)
sum(is.na(un_score$avg))
sum(is.na(f2))
sum(is.na(f3))
View(newdf)
View(newdf)
View(newdf)
newdf$apache_plan[newdf$apache_plan==0]=NA
View(newdf)
View(newdf)
newdf$apache_plan[newdf$apache_plan==NaN]=NA
View(newdf)
newdf$apache_plan[is.nan(newdf$apache_plan)]=NA
View(newdf)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
newdf$apache_un[newdf$apache_un==0]=NA
newdf$apache_un[is.nan(newdf$apache_un)]=NA
runApp()
View(newdf)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
sum(is.na(df13$date_of_admission))
#antibiotic
df13$antibiotics
#antibiotic
sort(df13$date_of_admission)
#antibiotic
No_a=table(df13$date_of_admission[df13$antibiotics=="No"])
Yes_a=table(df13$date_of_admission[df13$antibiotics=="Yes"])
No_a
Yes_a
dfNo_a=data.frame(No_a)
dfYes_a=data.frame(Yes_a)
dfNo_a$Var1=as.Date(dfNo_a$Var1)
dfYes_a$Var1=as.Date(dfYes_a$Var1)
f7=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(dfNo_a$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(dfNo_a$Var1[j])){
f7[i]=dfNo_a$Freq[j]
}
}
}
newdf$No_anti=f7
f8=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(dfYes_a$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(dfYes_a$Var1[j])){
f8[i]=dfYes_a$Freq[j]
}
}
}
newdf$Yes_anti=f8
sum(is.nan(newdf$Yes_anti))
sum(is.nan(newdf$No_anti))
sum(is.na(newdf$No_anti))
sum(is.na(newdf$Yes_anti))
runApp()
No_c=table(df13$date_of_admission[df13$cardiovascular_support=="No"])
Yes_c=table(df13$date_of_admission[df13$cardiovascular_support=="Yes"])
dfNo_c=data.frame(No_c)
dfNo_c$Var1=as.Date(dfNo_c$Var1)
dfYes_c=data.frame(Yes_c)
dfYes_c$Var1=as.Date(dfYes_c$Var1)
f9=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(dfNo_c$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(dfNo_c$Var1[j])){
f9[i]=dfNo_c$Freq[j]
}
}
}
newdf$No_card=f9
f10=numeric(1188)
for (i in 1:length(newdf$Var1)) {
for (j in 1:length(dfYes_c$Var1)) {
if(as.Date(newdf$Var1[i])==as.Date(dfYes_c$Var1[j])){
f10[i]=dfYes_c$Freq[j]
}
}
}
newdf$Yes_card=f10
sum(is.na(newdf$No_card))
sum(is.nan(newdf$No_card))
sum(is.nan(newdf$Yes_card))
sum(is.nan(newdf$No_card))
sum(is.na(newdf$Yes_card))
runApp()
View(newdf)
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
View(newdf)
